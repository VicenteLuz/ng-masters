<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>AngularJS</title>
  <link rel="stylesheet" href="../css/curso.css">
  <script src="../lib/angular.min.js"></script>
  <script src="../lib/jquery-1.11.0.js"></script>
  <script src="../lib/jquery.tooltip.js"></script>
  <script>
    window.Global = {};
    Global.myapp = angular.module('myapp', []);
    Global.myapp.config(function($interpolateProvider){
      $interpolateProvider.startSymbol('{[{').endSymbol('}]}');
    });

    Global.myapp.controller('MyCtrl', ['$scope', function($scope){
        $scope.umavariavelqualquer = 'oi mamae';

        $scope.teste = function(){
            $scope.umavariavelqualquer += $scope.umavariavelqualquer;          
        };
    }]);

    Global.myapp.directive('seclicar', function(){
        return {
            restrict: 'A',
            link: function(scope, element, attrs){
                $(element).click(function(){
                    alert(attrs.mostra);
                    console.log(scope.umavariavelqualquer);
                });
            }
        }
    });

    Global.myapp.directive('seclicar2', function(){
        return function(scope, element, attrs){
            $(element).click(function(){
                alert(attrs.mostra);
                console.log(scope.umavariavelqualquer);
            });
        };
    });

    Global.myapp.directive('hoverzinho', function(){
        return {
            restrict: 'A',
            scope: {},
            link: function(scope, element, attrs){
                $(element).hover(function(){
                    console.log(scope.umavariavelqualquer);
                });
            }
        }
    });

    Global.myapp.directive('hoverzinho2', function(){
        return {
            restrict: 'A',
            scope: {
                mostra: '@'
            },
            link: function(scope, element, attrs){
                $(element).hover(function(){
                    console.log(scope.mostra);
                });
            }
        }
    });

    Global.myapp.directive('reloginho', function(){
        return {
            restrict: 'A',
            scope: {},
            replace: false,
            template: '<div>{[{now}]}</div>',
            controller: ['$scope', '$interval', function($scope, $interval){
                $scope.now = new Date();
                $interval(function(){
                    $scope.now = new Date();
                }, 1000)
            }]
        }
    });

    Global.myapp.directive('tooltip', function(){
        return function(scope, element, attrs){
            $(element).tooltip({
              content: attrs.title
            });
        };
    });
  </script>
</head>
<body ng-app="myapp" ng-controller="MyCtrl">
<div class="container content">
  <h1>Diretivas de atributo</h1>

  <section>
    <h3>Tipo A, função link</h3>
    <div seclicar mostra="Oiiiiii">Clica aí</div>
  </section>

  <section>
    <h3>A mesma coisa, com um atalho.</h3>
    <div seclicar2 mostra="Oi de novoooo">Clica aí</div>
  </section>

  <section>
    <h3>Com escopo isolado</h3>
    <div hoverzinho>Passa o mouse em cima</div>
  </section>

  <section>
    <h3>Passando parametros</h3>
    <div hoverzinho2 mostra="{[{umavariavelqualquer}]}">Passa o mouse de novo</div>
  </section>

  <section>
    <h3>Templates e controllers</h3>
    <div reloginho>Esse texto vai sumir</div>

    <ul>
      <li>Valem as mesmas regras das diretivas do tipo E</li>
      <li>Atenção pro efeito do "replace"</li>
      <li>$scope x scope? Nome x posição!</li>
    </ul>
  </section>

  <section>
    <h3>Integração com JQuery</h3>

    <span class="tooltip" title="Olha... uma tooltip!">
      Passa o mouse aih de novo...
    </span>

    <ul>
      <li>Até funciona, mas melhor não fazer isso...</li>
    </ul>

    <span tooltip title="Tooltip com Angular, aih sim :-)">
      Se nesse pc tem mouse... passa ni mim!
    </span>    

  </section>

  <footer>
    <h3>Interessante... Tem uma aplicação mais prática pra esse tipo de diretiva?</h3>
    <ul>
      <li>Tem sim, <a href="009-wrapper_jquery.html">wrappers de plugins JQuery</a></li>
    </ul>
  </footer>

  <script>
    $('.tooltip').tooltip();
  </script>

</div>



</body>
</html>
