<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>AngularJS</title>
  <link rel="stylesheet" href="../css/curso.css">
</head>

<body>
  <div class="head">
    <span style="font-weight:bold">ng-<span style="color: rgb(125, 25, 51);">masters</span></span>: AngularJS na prática
  </div>
  <div class="container content"> 
    <h1>Grunt - Olha quanta coisa legal</h1>

    <section>
      <h3>ng-min</h3>
      
      <p>Nao precisa esquentar a cabeça com <code>function($scope)</code> x <code>['$scope', function($scope)]</code></p>
      <pre>
  # package.json
  "grunt-karma": "~0.8.0",
  "karma": "~0.12.8",
  "karma-chrome-launcher": "~0.1.4",
  "karma-coverage": "~0.1",
  "karma-mocha": "~0.1",
  "karma-phantomjs-launcher": "~0.1"

  #Gruntfile.js

  //...
  grunt.loadNpmTasks('grunt-ngmin');

  //...
  var concamina_cachetemlpates_tasks = [
  'clean:before',
  'concat:build', 
  'ngtemplates',
  'ngmin:fix_angular_declarations', // <-----------
  'concat:withtemplates', 
  'uglify:build', 
  'copy:myapp', 
  // 'clean:after', 
  ];

  //...
  ngmin:{
    fix_angular_declarations: {
        src: 'tmp/myapp.js',
        dest: 'tmp/myapp.js'
    }
  }  
      </pre>

      <p> Veja a diferença no myapp.js, o que ele faz com o config que tava no base2.js...</p>

    </section>

    <section>
      <h3>Watches...</h3>
      
      <p>Não precisa ficar buildando com o grunt toda hora...</p>
      <pre>
  # package.json
  "grunt-contrib-watch": "^0.6.1",

  #Gruntfile.js

  //...
  grunt.loadNpmTasks('grunt-contrib-watch');

  //...
    watch:{
      js: {
          files: [
            '../js/base2.js',
            '../js/ajax2.js',
            '../js/github_api3.js',
            '../js/components/gh-*/**/*.js',
            '../js/components/popup.js',
            '../js/**/*.html'
          ],
          tasks: ['concamina_cache']
      },
    }

  # Console
  grunt watch ou grunt watch:js
      </pre>

      <p>Roda o watch e esquece da vida... (mas cuidado com arquivo aberto no windows....!)</p>

      <p>Hey, e esse código duplicado aí??</p>

    </section>

    <section>
      <h3>.... e TESTES (muita Karma nessa hora...)</h3>
      
      <p>Sim, dá pra rodar testes no seu código angular usando grunt... Mas a gente vai dar sóooo uma olhadinha!</p>
      <pre>
  # package.json
    "chai": "1.4.0",
    "grunt-karma": "~0.8.0",
    "karma": "~0.12.8",
    "karma-chrome-launcher": "~0.1.4",
    "karma-coverage": "~0.1",
    "karma-mocha": "~0.1",
    "karma-phantomjs-launcher": "~0.1",

  #Gruntfile.js

  //...
  grunt.loadNpmTasks('grunt-karma');

  //...
    karma: {
      unit: {
        configFile: '../test/karma-unit.conf.js',
        autoWatch: false,
        browsers: ["Chrome"], // ou ["PhantomJS"] : 
        singleRun: true
      }
    }
      </pre>

      <p>E mais: chrome x phantom:</p>

    </section>

    <footer>
      <h3>ANIMAAAAAAL. EU amo JS! Eu amo Angular! Eu amo grunt! E eu vou dominar o mundo com esse conhecimento porraaaaa!!! :-)</h3>
      <p>Hehe calma lá. Tem umas partes chatas, que não são nada óbvias. Toda rosa tem seus espinhos, e a gente precisa falar deles</p>
      <ul>
        <li><a href="../08-espinhos/001-desvantagens.html">Angular não é bala de prata</a></li>
      </ul>
    </footer>
  </div>

</body>
</html>
