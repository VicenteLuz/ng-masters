<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>AngularJS</title>
<link rel="stylesheet" href="../css/bootstrap.css">
<link rel="stylesheet" href="003-todo.css">
<script src="../lib/jquery-1.10.2.min.js"></script>
<script src="../lib/angular.min.js"></script>
<script>
  function MyCtrl($scope, $http){
    function loadTodos(){
      $http.get('/02-jquery/todos.json').success(function(todos){
        $scope.todos = todos;
      });
    }

    $scope.remove = function(index){
      $scope.todos.splice(index, 1);
    }

    loadTodos();

    $scope.newtask_keyup = function(evt){
      if(evt.keyCode == 13){
        var todo = {
          id: 123,
          todo: $scope.newtask,
          done: false
        };
        $scope.todos.push(todo);
        $scope.newtask = '';
      }
    }
  }
</script>
</head>
<body>
<div class="container" style="margin: 15px;" ng-app ng-controller="MyCtrl">
  <h1>TODO list - com JQuery</h1>

  <div>
    <div>
      <label>Nova tarefa:</label>
      <input type="text" ng-model="newtask" ng-keyup="newtask_keyup($event)">
    </div>
    <table class="table table-striped table-bordered todotable">
      <tr ng-repeat="todo in todos">
        <td class="todocheck"><input type="checkbox" ng-model="todo.done"></td>
        <td ng-class="{tododone: todo.done}">{{todo.todo}}</td>
        <td class="todoremove"><a href ng-click="remove($index)"><i class="icon-trash"></i></a></td>
      </tr>
    </table>
  </div>

  <h3 style="margin-top: 30px; color: blue;">
    Veja como isso resolve os problemas levantados...</h3>

  <h3 style="margin-top: 30px;">
    1) Lógica != apresentação</h3>
  <div class="alert alert-info" id="explicadom">
    A apresentação (HTML) e a lógica (javascript) estão<br>
    implementadas em lugares separados.
  </div>

  <h3 style="margin-top: 30px;">
    2) Mais fácil de debugar</h3>
  <div class="alert alert-info" id="explicadom">
    Relação mais óbvia entre eventos e código (ng-click, ng-keyup)
  </div>

  <h3 style="margin-top: 30px;">
    3) Código mais robusto</h3>
  <div class="alert alert-info" id="explicadom">
    Alterações na apresentação são muito menos prováveis de <br>
    quebrar funcionalidades, pois a lógica não conhece <strong>nada</strong><br>
    sobre a apresentacao.
  </div>

  <h3 style="margin-top: 30px; color: blue;">
    E uma vantagem adicional</h3>
  <div class="alert alert-info" id="explicadom">
    <strong>Zero javascript</strong> pra fazer a ligação da checkbox com o css da linha
  </div>

  <h3 style="margin-top: 30px;">UAU, que massa! (mas eu não entendi nada do código... :S)</h3>
  <ul>
    <li><a href="../03-angular/001-helloworld.html">Tranquilo! Vamos do começo: Hello World com Angular</a></li>
  </ul>
</div>

</body>
</html>





