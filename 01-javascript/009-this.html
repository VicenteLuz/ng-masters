<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>AngularJS</title>
<link rel="stylesheet" href="../css/curso.css">
<script src="../lib/jquery-1.11.0.js"></script>
<script src="009-this.js"></script>
</head>
<body>
  <div class="head">
    <span style="font-weight:bold">ng-<span style="color: rgb(125, 25, 51);">masters</span></span>: AngularJS na prática
  </div>
  <div class="container content"> 
    <h1>This</h1>

    <section>
      <h3>This... é isso?</h3>
      <p>:-)</p>
      <p>Toda função tem acesso a uma variável "this", que nada mais é do que o objeto que chamou a função. (a menos quando a gente chama a função com o "new" na frente)</p>
      <p>Dentro da execução de </p>
      <pre>  aviao.voa()</pre>
      <p>o this, dentro do método "voa()" aponta pra variável "aviao".</p>
      <p>Simples né... Mas muita gente boa se perde nessa hora!</p>
    </section>

    <section>
      <h3>Exemplinho 1</h3>
      <pre>
    function quem_eh_this(){ console.log(this); }
    quem_eh_this();

    aviao = {}
    aviao.voa = quem_eh_this;
    aviao.voa();

    //Conclusão importante:
    //Dependendo do contexto que uma função é usada, o this pode mudar!!!
      </pre>

      <h3>Vamos ver um exemplo mais concreto...</h3>
      Seja:
      <pre>
  var o = {name: 'Objeto'};
  o.alertnow = function(){
    alert(this);
  }
  o.alertlater = function(){
    setTimeout(function(){alert(this)}, 1000);
  }
      </pre>
      <button onclick="o.alertnow()">o.alertnow()</button> /
      <button onclick="o.alertlater()">o.alertlater()</button>

      <h3>Manjou o problema?</h3>
      <p>Especialistas criticam a linguagem por causa desse comportamento. Com uma certa razão na minha opinião.</p>
      <p>Agora, Lembra daquela técnica pra logar erros javascript no servidor, sem repetição?</p>
      <p>Vamos fazer isso de outro jeito...</p>

      <button onclick="set_onerror1()">set_onerror1()</button> /
      <button onclick="dapau()">dapau()</button>
      <pre jsfunctioncontent="dapau"></pre>
      <pre jsfunctioncontent="set_onerror1"></pre>

      <p>
        Viu o tamanho da zona?? Um jeito de resolver é assim:
      </p>

      <button onclick="set_onerror2()">set_onerror2()</button> /
      <button onclick="dapau()">dapau()</button>
      <pre jsfunctioncontent="set_onerror2"></pre>

      <p>
        Moral da história:
        CUIDADO com o this. Ele pode não ser quem vc pensa!
      </p>
    </section>

    <footer>
      <h3>Então eu não posso confiar nem no this? Que triste isso! :'(</h3>
      <ul>
        <li>É uma má notícia, eu sei... A boa noticia é que agora vc sabe disso ne! <br>
          mas enfim, vamos <a href="010-recapitulando.html">dar uma recapitulada</a>  no que a gente viu até aqui...</li>
      </ul>
    </footer>
  </div>

</body>
</html>
