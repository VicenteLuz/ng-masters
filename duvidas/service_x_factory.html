<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>AngularJS</title>
  <link rel="stylesheet" href="../css/bootstrap.css">
  <script src="../lib/angular.js"></script>
  <script>
    //http://stackoverflow.com/questions/18939709/angularjs-when-to-use-service-instead-of-factory

    angular.module('myapp', []);

    function f(){
      this.count = 10;
      this.a = 1;
      return {
          count: 0,
          b: 2
      };
    }
    function f3(){
      this.count = 10;
      this.a = 1;
    }

    angular.module('myapp').factory('S1', f);
    angular.module('myapp').service('S2', f);
    angular.module('myapp').service('S3', f3);

    angular.module('myapp').controller('C1', function($scope, S1, S2, S3){
        $scope.s1 = S1;
        $scope.s2 = S2;
        $scope.s3 = S3;
        $scope.inc1 = function(){
            S1.count++;
        };
        $scope.inc2 = function(){
            S2.count++;
        };
        $scope.inc3 = function(){
            S3.count++;
        };
    });
    angular.module('myapp').controller('C2', function($scope, S1, S2, S3){
        $scope.s1 = S1;
        $scope.s2 = S2;
        $scope.s3 = S3;
        $scope.inc1 = function(){
            S1.count++;
        };
        $scope.inc2 = function(){
            S2.count++;
        };
        $scope.inc3 = function(){
            S3.count++;
        };
    });
  </script>
</head>
<body ng-app="myapp">
<div class="container" style="margin: 15px;">
  <h1>Factory x Service</h1>

  <div>
      Controller 1
      <div ng-controller="C1">
          <button ng-click="inc1()">Inc 1</button>
          <button ng-click="inc2()">Inc 2</button>
          <button ng-click="inc3()">Inc 3</button>
          <div>
              s1: {{s1.count}}, s2: {{s2.count}}, s3: {{s3.count}}
          </div>
      </div>
      <hr>
      Controller 1
      <div ng-controller="C2">
          <button ng-click="inc1()">Inc 1</button>
          <button ng-click="inc2()">Inc 2</button>
          <button ng-click="inc3()">Inc 3</button>
          <div>
              s1: {{s1.count}}, s2: {{s2.count}}, s3: {{s3.count}}
          </div>
      </div>
  </div>
</div>

</body>
</html>
